<!DOCTYPE html>
<html class="page" lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HTML Academy: Кэт энерджи</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body class="page__body">
      <header class="page-header">
        <div class="page-header__wrapper">
          <div class="page-header__menu-up">
            <div class="page-header__logo-wrapper">
              <a href="#" class="page-header__logo">
                <img class="page-header__logo-image" src="img/logo-mobile.svg" alt="Cat's shop" width="33" height="37">
              </a>
              <img src="img/logo-cat-energy.svg" alt="логотип сайта" width="101" height="18" class="page-header__logo-energy">
              <button class="page-header__toggle-main page-header__toggle-main--closed" type="button">
                <span class="visually-hidden">Открыть меню</span>
              </button>
            </div>
            <nav class="main-nav main-nav--nojs">
              <div class="main-nav__wrapper">
                <ul class="main-nav__list site-list">
                  <li class="site-list__item site-list__item--active">
                    <a href="index.html">главная</a></li>
                  <li class="site-list__item">
                    <a href="catalog.html">Каталог продукции</a></li>
                  <li class="site-list__item">
                    <a href="#">подбор программы</a></li>
                </ul>
              </div>
            </nav>
          </div>
          <div class="page-header__feed feed-slogan">
            <div class="page-header__containe-background-image">
              <div class="feed-slogan__container">
                  <h1 class="feed-slogan__title">Функциональное
                    питание для котов
                  </h1>
                  <p class="feed-slogan__p">
                    Занялся собой? Займись котом!
                  </p>
                  <a href="#" class="feed-slogan__button-container">
                    подобрать программу
                  </a>
                  <img src="img/index-cat.png" alt="" width="552" height="499" class="feed-slogan__img">
              </div>
            </div>
          <div class="feed-slogan__wrapper">
            <a href="#" class="feed-slogan__button">
              подобрать программу
            </a>
          </div>
          </div>
        </div>
      </header>
      <main class="page-main">
        <section class="advantages">
          <div class="advatages__wraper">
            <h2 class="visually-hidden">
              Наши преимущества
            </h2>
            <ul class="advantages__list">
              <li class="advantages__item advantages__item--slimming">
                <img src="img/cat_lose_mass.svg" alt="cat" width="50" height="53" class="advantages__img">
                <h3 class="advantages__title">похудение</h3>
                <p class="advantages__description">
                  Ваш кот весит больше собаки и почти утратил способность
                  лазить по деревьям? Пора на диету! Cat Energy Slim поможет
                  вашему питомцу сбросить лишний вес.
                </p>
                <p class="advantages__button">
                  каталог slim
                </p>
              </li>
              <li class="advantages__item advantages__item--mass">
                <img src="img/cat_make_mass.svg" alt="cat" width="67" height="50" class="advantages__img">
                <h3 class="advantages__title">набор массы</h3>
                <p class="advantages__description">
                  Заработать авторитет среди дворовых котов и даже собак?
                  Серия Cat Energy Pro поможет вашему коту нарастить
                  необходимые мышцы!
                </p>
                <p class="advantages__button">
                  каталог slim
                </p>
              </li>
            </ul>
          </div>
        </section>
        <section class="technology">
          <div class="technology__wrapper">
            <h2 class="technology__title">Как это работает</h2>
            <ul class="technology__list">
              <li class="technology__item technology__item_1">
                <div class="technology__icon">
                  <img src="img/icons/icon_leaf.svg" alt="">
                </div>
                <p class="technology__description">Функциональное питание
                  содержит только полезные
                  питательные вещества.
                </p>
              </li>
              <li class="technology__item technology__item_2">
                <div class="technology__icon">
                  <img src="img/icons/icon_tub.svg" alt="">
                </div>
                <p class="technology__description">
                  Выпускается в виде порошка,
                  который нужно лишь залить
                  кипятком и готово.
                </p>
              </li>
              <li class="technology__item technology__item_3">
                <div class="technology__icon">
                  <img src="img/icons/icon_eat.svg" alt="">
                </div>
                <p class="technology__description">
                  Замените один-два приема
                  обычной еды на наше
                  функциональное питание.
                </p>
              </li>
              <li class="technology__item technology__item_4">
                <div class="technology__icon">
                  <img src="img/icons/clock.svg" alt="">
                </div>
                <p class="technology__description">
                  Уже через месяц наслаждайтесь
                  изменениями к лучшему
                  вашего питомца!
                </p>
              </li>
            </ul>
          </div>
        </section>
        <section class="example">
          <div class="example__wrapper">
            <h2 class="example__title">
              Живой пример
            </h2>
            <div class="example__info">
              <p class="example__description">
                Борис сбросил 5 кг за 2 месяца, просто заменив свой
                обычный корм на Cat Energy Slim. Отличный результат
                без изнуряющих тренировок! При этом он не менял своих
                привычек и по-прежнему спит по 16 часов в день.
              </p>
              <div class="example__container">
                <div class="example__container-span">
                  <span class="example__number">
                    5 кг
                    <b>снижение веса</b>
                  </span>
                  <span class="example__number">
                    60 ДНЕЙ
                    <b>затрачено  времени</b>
                  </span>
                </div>
                <p class="example__price">
                  Затраты на питание: 15 000 РУБ.
                </p>
              </div>
            </div>
            <div class="example__images-cats">
              <img src="img/mobile-big-cat.png" alt="cat-big" width="311" height="232" class="example__image-mobile">
              <img src="img/half-fat-cat.png" alt="cat-big" width="311" height="232" class="example__image-tablet-desktop-1">
              <img src="img/half-thin-cat.png" alt="cat-big" width="311" height="232" class="example__image-tablet-desktop-2">
            </div>
            <div class="example__range">
              <div class="example__range-controls">
                <b class="left">было</b>
                <div class="scale">
                  <div class="bar"></div>
                  <div class="toggle"></div>
                </div>
                <b class="right">стало</b>
              </div>
            </div>
          </div>
        </section>
        <footer class="page-footer">
            <section class="map">
              <h2 class="visually-hidden">как до нас добраться</h2>
              <div class="map__info">
                <h3 class="map__title">
                  приглашаем <br>
                  к сотрудничеству <br>
                  дилеров!
                </h3>
                <p class="map__contact">
                  ул. Большая <br>
                  Конюшенная, д. 19/8 <br>
                  <span class="map__contact-city">Санкт-Петербург</span>
                </p>
                <img src="img/footer-point-map.svg" alt="point" width="57" height="53" class="map__pointer">
              </div>
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1998.6606247046832!2d30.323450149120934!3d59.93777341157712!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4696310fb858010f%3A0x5b56e33568a4029!2z0JHQvtC70YzRiNCw0Y8g0JrQvtC90Y7RiNC10L3QvdCw0Y8g0YPQuy4sIDIxLCDQodCw0L3QutGCLdCf0LXRgtC10YDQsdGD0YDQsywgMTkxMTg2!5e0!3m2!1sru!2sru!4v1617894943059!5m2!1sru!2sru" width="320" height="362" allowfullscreen="" loading="lazy"></iframe>
            </section>
            <div class="page-footer__wrapper">
              <section class="page-footer__container">
                <div class="page-footer__logo-energy"></div>
                <div class="page-footer__social-media">
                  <ul class="page-footer__list social-list">
                    <li class="social-list__item social-list__item--vk"></li>
                    <li class="social-list__item social-list__item--inst"></li>
                    <li class="social-list__item social-list__item--fc"></li>
                  </ul>
                </div>
                <div class="page-footer__logo academy-logo">
                  <span class="academy-logo__text">HTML Academy</span>
                  <svg width="27" height="34" viewBox="0 0 27 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.6426 0.0157537L13.5 0L0 1.40733V26.0129L13.5 34L27 26.0129V1.40733L13.6426 0.0157537ZM25.2344 25.0151L13.5 31.9573L1.76561 25.0151V14.9293L13.4507 21.8451L13.4701 23.0984L5.45351 18.3548L5.44295 19.5801L13.4894 24.3885L13.5088 25.675L5.46408 20.9174L5.45351 22.1427L13.5 26.9511L21.6239 22.1182V20.8929V16.909L25.2432 14.7595L25.2344 25.0151ZM25.2344 13.4519L22.0147 15.3319L20.5325 16.2071L13.4666 12.0201L13.456 13.2454L19.4957 16.818L19.4429 16.8495L19.3126 16.9247L18.4536 17.4166L13.4666 14.4689L13.456 15.6942L17.3921 18.0222L16.4591 18.6314L16.438 18.6436L13.4666 16.902L13.456 18.1273L15.4029 19.2615L13.4155 20.4483L1.7973 13.5762L13.4349 6.61831L25.2344 13.4519ZM25.2344 12.2266L13.4401 5.31075L1.76561 12.2196V2.9897L13.5 1.76442L25.2344 2.9897V12.2266Z" fill="#666666"/>
                  </svg>
                </div>
              </section>
            </div>
        </footer>
      </main>
  </body>
  <script>
    let header_toggle = document.querySelector('.page-header__toggle-main');
    let header_main = document.querySelector('.main-nav');

    header_main.classList.remove('main-nav--nojs');
    header_main.classList.add('main-nav--closed');

    header_toggle.onclick = function() {
      if (this.classList.contains('page-header__toggle-main--closed')) {
        this.classList.remove('page-header__toggle-main--closed');
        this.classList.add('page-header__toggle-main--opened');
        header_main.classList.remove('main-nav--closed');
      } else {
        this.classList.remove('page-header__toggle-main--opened');
        this.classList.add('page-header__toggle-main--closed');
        header_main.classList.add('main-nav--closed');
      }
    }

    let cat_event = document.querySelector('.example__range');
    let scale = document.querySelector('.scale');
    let example__images_cats = document.querySelector('.example__images-cats img');

    cat_event.addEventListener('click', function(event) {
      if (event.target.closest('.right')) {
        example__images_cats.src = "img/mobile-small-cat.png";
        scale.style.justifyContent = 'flex-end';
      }
      if (event.target.closest('.left')) {
        example__images_cats.src = "img/mobile-big-cat.png";
        scale.style.justifyContent = 'flex-start';
      }
      document.removeEventListener('mousemove', pointerMove);
    });

    /* range*/
    let toggle = document.querySelector('.toggle');
    let bar = document.querySelector('.bar');
    let fatFullcat = document.querySelector('.example__image-tablet-desktop-1');
    let skinnyFullcat = document.querySelector('.example__image-tablet-desktop-2');
    let step = 0;
    let steps = 2;
    cat_event.addEventListener("mousedown",  pointerDown);

    function pointerDown(event) {
      if (event.target.closest(".toggle")) {
        event.preventDefault();
        document.addEventListener('mousemove',  pointerMove);
      }
    }
    function pointerMove(event) {
      let splitTogle = event.clientX - toggle.offsetWidth / 2;
      let leftPart = splitTogle - scale.getBoundingClientRect().left;
      let leftRelativePart = leftPart / scale.offsetWidth;

      if (leftRelativePart < 0) {
        leftRelativePart = 0;
      }

      if (leftRelativePart > 1) {
        leftRelativePart = 1;
      }

      step = Math.round(leftRelativePart * steps);

      let precent = leftRelativePart * 100;
      toggle.style.left = `${precent}%`;

      if (precent > 50) {
        let halfScale = scale.offsetWidth / 2;
        let leftRigtPart = splitTogle - (scale.getBoundingClientRect().left + halfScale );
        let leftRightRelativePart = leftRigtPart / halfScale;
          if(leftRightRelativePart < 0) {
            leftRightRelativePart = 0;
        }
          if(leftRightRelativePart > 1) {
            leftRightRelativePart = 1;
        }
        bar.style.width = `${leftRightRelativePart * 50}%`;
        let rigrPosition = 50 - leftRightRelativePart * 50;
        bar.style.right = `${rigrPosition}%`;


      }

      if ( precent < 50 ) {
        let halfScale = scale.offsetWidth / 2;
        let leftRigtPart = -(splitTogle - (scale.getBoundingClientRect().right - halfScale)) ;
        let leftRightRelativePart = leftRigtPart / halfScale;
        if(leftRightRelativePart < 0) {
            leftRightRelativePart = 0;
        }
          if(leftRightRelativePart > 1) {
            leftRightRelativePart = 1;
        }
        bar.style.width = `${leftRightRelativePart * 50}%`;
        let rigrPosition = 50 - leftRightRelativePart * 50;
        bar.style.left = `${rigrPosition}%`;


      }
      document.addEventListener('mouseup',  pointerUp);
    }

    function pointerUp(event) {

      document.removeEventListener('mousemove', pointerMove);
      let percent = (step / steps) * 100;

      toggle.style.left = `${percent}%`;

      if (step === 0) {
        bar.style.width = 50 + "%";
        console.log(bar.style.width);
        bar.style.left = 0 + "%";
        fatFullcat.style.display = "block";
        fatFullcat.style.width = 708 + "px";
        fatFullcat.style.height = 607 + "px";
        fatFullcat.src = "img/cat-fat-full-desktop.png";
        skinnyFullcat.style.display = "none";
      }

      if (step === 1) {
        bar.style.width = 0;
        bar.style.left = 50 + "%";
        fatFullcat.style.display = "block";
        skinnyFullcat.style.display = "block";
        fatFullcat.style.width = 354 + "px";
        fatFullcat.style.height = 607 + "px";
        skinnyFullcat.style.width = 354 + "px";
        skinnyFullcat.style.height = 607 + "px";
        fatFullcat.src = "img/half-fat-cat.png";
        skinnyFullcat.src = "img/half-thin-cat.png";
      }

      if (step === 2) {
        bar.style.width = 50 + "%";
        bar.style.right = 0 + "%";
        skinnyFullcat.style.width = 708 + "px";
        skinnyFullcat.style.height = 607 + "px";
        skinnyFullcat.style.display = "block";
        skinnyFullcat.src = "img/cat-skinny-full-desktop.png";
        fatFullcat.style.display = "none";
      }
      document.removeEventListener('mouseup', pointerUp );
    }

  </script>
</html>
